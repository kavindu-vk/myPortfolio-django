{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kavindu Ranasinghe</title>
    <link rel="stylesheet" href="{% static 'css/styles.css' %}">

    <!-- favicon -->
    <link rel="icon" href="../static/images/favicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon" sizes="180x180" href="../static/images/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="../static/images/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="../static/images/favicon-16x16.png">
</head>
<body>
    
    <!-- PAGE LOADER -->
    <div class="page-loader">
        <div></div>
        <div></div>
        <div></div>
    </div>
    <!-- END PAGE LOADER -->

    <!-- BACKGROUND CIRCLE -->
    <div class="bg-circles">
        <div class="circle-1"></div>
        <div class="circle-2"></div>
        <div class="circle-3"></div>
        <div class="circle-4"></div>
        <div class="circle-5"></div>
    </div>
    <!-- END BACKGROUND CIRCLE -->

    <!-- OVERLAY -->
    <div class="overlay"></div>
    <!-- END OVERLAY -->


    <!-- MAIN SECTION -->
    <div class="main hidden">
        
        <!-- HEADER -->
        <header class="header">

            <div class="container">
                <div class="row flex-end">
                    <button type="button" class="nav-toggler ">
                        <span></span>
                    </button>

                    <nav class="nav ">
                        <div class="nav-inner">
                            <ul>
                                <li><a href="#home" class="nav-item link-item">home</a></li>
                                <li><a href="#about" class="nav-item link-item">about</a></li>
                                <li><a href="#portfolio" class="nav-item link-item">portfolio</a></li>
                                <li><a href="#contact" class="nav-item link-item">contact</a></li>
                            </ul>
                        </div>
                    </nav>
                </div>
            </div>
        </header>
        <!-- END HEADER -->
        
        <!-- HOME SECTION -->
        <section class="home-section align-items-center" id="home">
            
            <div class="container">
                <div class="row align-items-center">
                    <div class="home-text">
                        <p>{{ home.greeting }}</p>
                        <h1>{{ home.name }}</h1>
                        
                        <div class="typed-text">
                            {% for c in careers %}
                            <h2>{{ c.name }}</h2>
                            {% endfor %}
                        </div>
                        
                        
                        <a href="#about" class="btn link-item">more about me</a>
                        <a href="#portfolio" class="btn link-item">portfolio</a>
                    </div>

                    <div class="home-img">
                        <div class="img-box">
                            <img src="{{ home.picture.url }}" alt="">
                        </div>
                    </div>
                </div>
            </div>
        </section>
        <!-- END HOME SECTION -->

        <!-- ABOUT SECTION -->
        <section class="about-section sec-padding" id="about">
            <div class="container">
                <div class="row">
                    <div class="section-title">
                        <h2>{{ about.heading }}</h2>
                    </div>
                </div>

                <div class="row">
                    <div class="about-img">
                        <div class="img-box">
                            <img src="{{ about.profile_img.url }}" alt="">
                        </div>
                    </div>

                    <div class="about-text">
                        <p>{{ about.description }}</p>
                        <h3>Skills</h3>
                        <div class="skills">
                            {% for skill in skills %}
                            <div class="skill-item">{{ skill.skill_name }}</div>
                            {% endfor %}
                        </div>

                        <div class="about-tabs">
                            <button type="button" class="tab-item active" data-target="#education">education</button>
                            <button type="button" class="tab-item" data-target="#experience">experience</button>
                        </div>

                        <!-- education -->
                        <div class="tab-content active" id="education">
                            <div class="timeline">
                                {% for edu in education %}
                                <div class="timeline-item">
                                    <span class="date">{{ edu.date_range }}</span>
                                    <h4>{{ edu.title }} - <span>{{ edu.institute }}</span></h4>
                                    <p>{{ edu.description }}</p>
                                </div>
                                {% endfor %}
                            </div>
                        </div>
                        <!-- end education -->

                        <!-- experience -->
                        <div class="tab-content" id="experience">
                            <div class="timeline">
                                {% for exp in experience %}
                                <div class="timeline-item">
                                    <span class="date">{{ exp.date_range }}</span>
                                    <h4>{{ exp.title }} - <span>{{ exp.institute }}</span></h4>
                                    <p>{{ exp.description }}</p>
                                </div>
                                {% endfor %}

                            </div>
                        </div>
                        <!-- end experience -->

                        <a href="{{ upload_pdf.pdf_file.url }}" target="_blank" class="btn">download cv</a>
                        <a href="#contact" class="btn link-item">contact me</a>
                    </div>
                </div>
            </div>
        </section>
        <!-- END ABOUT SECTION -->

        <!-- PORTFOLIO SECTION -->
        <section class="portfolio-section sec-padding" id="portfolio">
            <div class="container">
                <div class="row">
                    <div class="section-title">
                        <h2>recent work</h2>
                    </div>
                </div>

                <div class="row">
                    <!-- portfolio items -->
                    {% for portfolio in portfolios %}
                    <div class="portfolio-item">
                        <div class="portfolio-item-thumbnail">
                            <img src="{{ portfolio.portfolio_img.url }}" alt="">
                        </div>

                        <h3 class="portfolio-item-title">{{ portfolio.title }}</h3>
                        <button type="button"  class="btn view-project-btn">view project</button>

                        <div class="portfolio-item-details">
                            <div class="description">
                                <p>{{ portfolio.description }}</p>
                            </div>

                            <div class="general-info">
                                <ul>
                                    <li>Created - <span>{{ portfolio.created }}</span></li>
                                    <li>technology used - <span>{{ portfolio.technology_used }}</span></li>
                                    <li>Role - <span>{{ portfolio.role }}</span></li>
                                    <li>View Online - <span><a href="{{ portfolio.View_Online }}" target="_blank">{{ portfolio.View_Online }}</a></span></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    {% endfor %}
                    <!-- end portfolio items -->

                </div>
            </div>
        </section>
        <!-- END PORTFOLIO SECTION -->

        <!-- CONTACT SECTION -->
        <section class="contact-section sec-padding" id="contact">
            <div class="container">
                <div class="row">
                    <div class="section-title">
                        <h2>contact me</h2>
                    </div>
                </div>

                <div class="row">
                    <div class="contact-form">
                        <!-- Alert message -->
                    <div id="success-alert" style="display: none;" class="alert alert-success" role="alert">
                        Your message has been sent successfully!
                    </div>
                        <form id="contact-form" method="POST" action="">
                            {% csrf_token %}
                            <div class="row">
                                <div class="input-group">
                                    <input type="text" name="name" placeholder="Name" class="input-control" required>
                                </div>

                                <div class="input-group">
                                    <input type="text" name="email" placeholder="Email" class="input-control" required>
                                </div>

                                <div class="input-group">
                                    <input type="text" name="subject" placeholder="Subject" class="input-control" required>
                                </div>

                                <div class="input-group">
                                    <textarea name="message" placeholder="Message" class="input-control" required></textarea>
                                </div>

                                <div class="submit-btn">
                                    <button type="submit" class="btn">send message</button>
                                </div>
                            </div>
                        </form>
                    </div>

                    <div class="contact-info">
                        <div class="contact-info-item">
                            <h3>Email</h3>
                            <p>{{ contact.email }}</p>
                        </div>

                        <div class="contact-info-item">
                            <h3>phone</h3>
                            <p>{{ contact.phone }}</p>
                        </div>

                        <div class="contact-info-item">
                            <h3>follow me</h3>
                            <div class="social-links">
                                {% for links in contact.contactinfo_set.all %}
                                <a href="{{ links.link }}" target="_blank"><i class="fab fa-{{ links.social_name }}"></i></a>
                                {% endfor %}
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        <!-- END CONTACT SECTION -->
    </div>
    <!-- END MAIN SECTION -->

    <!-- POPUP -->
    <div class="portfolio-popup">
        <div class="pp-inner">
            <div class="pp-content">
                <div class="pp-header">
                    <button type="button" class="btn pp-close"><i class="fas fa-times"></i></button>
                    <div class="pp-thumbnail">
                        <img src="{{ portfolio.portfolio_img.url }}" alt="">
                    </div>
                    <h3>app landing Page</h3>

                    <div class="pp-body">
                        <div class="description">
                            <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Itaque,praesentium accusantium! 
                                Odit inventore est sapiente libero quod facilis officia adipisci?
                                Lorem ipsum dolor sit amet consectetur adipisicing elit. Itaque,praesentium accusantium! 
                                Odit inventore est sapiente libero quod facilis officia adipisci?
                            </p>
                        </div>

                        <div class="general-info">
                            <ul>
                                <li>Created - <span>30 Nov 2023</span></li>
                                <li>technology used - <span>html, css, js</span></li>
                                <li>Role - <span>Fronted</span></li>
                                <li>View Online - <span><a href="#" target="_blank">shoeliqubal7890@gmail.com</a></span></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- END POPUP -->


    <script src="https://kit.fontawesome.com/a6c0a357bb.js" crossorigin="anonymous"></script>
    <script src="{% static 'js/script.js' %}"></script>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script>
        // Submit form using AJAX
        $('#contact-form').submit(function(e) {
            e.preventDefault();
            $.ajax({
                type: 'POST',
                url: '{% url "contact" %}',
                data: $(this).serialize(),
                success: function(response) {
                    // Display success message
                    $('#success-alert').show();
                    // Refresh page after 3 seconds
                    setTimeout(function() {
                        location.reload();
                    }, 3000);
                },
                error: function(xhr, status, error) {
                    console.error(xhr.responseText);
                }
            });
        });
    </script> 
</body>
</html>